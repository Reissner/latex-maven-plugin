% presupposes hyperref (e.g. preload header.tex)

% xelatex enters always else branch of \ifpdf 
% This is maybe because it always creates xdv 
% and the difference is only that for pdf another step is executed. 
% Whether this is considered a bug.... ? hm. 
\ifXeTeX%
  % for xelatex
  \special{pdf:minorversion 7}
  % TBD: find a way to express pdfinfoomitdate: necessary? 
  \special{pdf:trailerid []}
\else
  \ifpdf%
    \ifLuaTeX%
      % for lualatex
      \pdfvariable minorversion=7% chktex 1
      % omit CreationDate and ModDate keys.
      \pdfvariable suppressoptionalinfo 767% chktex 1
      % no adding to the trailer dictionary.
      \pdfvariable trailerid{}% chktex 1
      \pdfvariable suppressoptionalinfo -1% chktex 1
    \else
      \ifPDFTeX%
        \pdfminorversion=7         % for pdflatex
        % omit CreationDate and ModDate keys.
        % not before pdfTeX 3.14159265-2.6-1.40.17
        \pdfinfoomitdate=1                   % for pdflatex
        % no adding to the trailer dictionary.
        %\pdftrailer=0                        % for pdflatex
        \pdftrailerid{}                       % for pdflatex
        \pdfsuppressptexinfo=-1               % for pdflatex
      \else
        % Here, the tex processor is unknown. 
      \fi%pdftex
    \fi%luatex
  \else%ifpdf
  \fi%ifpdf
\fi%xetex

% 1 -> PTEX.Fullbanner
% 2 -> PTEX.FileName
% 4 -> PTEX.PageNumber
% 8 -> PTEX.InfoDict (/Producer /Creator /CreationDate /ModDate /Trapped)
% The following is to control metadata: 
% - erase docdata and set the ones needed thereafter
% - erase trailer to make repreoducible 
%   CAUTION: This is not recommended as the docs are no longer individual. 


%\pdfinfo{
%   /Author (Ernst Reissner)
%   /Title  (Maven plugin and ant-task to process latex)
%   /CreationDate (unknown)
%   /ModDate (unknown)
%   /Subject (latex plugin for maven and latex task for ant)
%   /Keywords (svg;png;metapost;PDF;LaTeX;maven;ant)
%}

% TBD: check of resulting pdf with exif unveils a warning duplicate author 

\hypersetup{
  pdfinfo={
      CreationDate={unknown},
      ModDate     ={unknown},
      Producer    ={unknown}
    }
}


