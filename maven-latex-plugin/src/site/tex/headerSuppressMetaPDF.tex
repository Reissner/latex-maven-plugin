% presupposes hyperref (e.g. preload header.tex)

% xelatex enters always else branch of \ifpdf 
% This is maybe because it always creates xdv 
% and the difference is only that for pdf another step is executed. 
% Whether this is considered a bug.... ? hm. 
\ifXeTeX%
  % for xelatex
  % TBD: find a way to express pdfinfoomitdate: necessary? 
  \special{pdf:trailerid [
    <00112233445566778899aabbccddeeff>
    <00112233445566778899aabbccddeeff>
  ]}
\else
  \ifpdf%
    \ifLuaTeX%
      % for lualatex
      % omit CreationDate and ModDate keys.
      %\pdfvariable suppressoptionalinfo 767% chktex 1
      % 767=512+0+128+64+...+1 this excludes all but 
      % no adding to the trailer dictionary.
      \pdfvariable trailerid{}% chktex 1
      \pdfvariable suppressoptionalinfo -1% chktex 1
      % both described in luatex reference manual \cite{LuaTexRef}, Section 3.2.1. 
% 0
% + 1 % PTEX.FullBanner
% + 2 % PTEX.FileName
% + 4 % PTEX.PageNumber
% + 8 % PTEX.InfoDict
% + 16 % Creator
% + 32 % CreationDate
% + 64 % ModDate
% + 128 % Producer
% + 256 % Trapped
% + 512 % ID
    \else
      \ifPDFTeX%
        % omit CreationDate and ModDate keys.
        % not before pdfTeX 3.14159265-2.6-1.40.17
        % the following two see pdftex user manual, \cite{PdfTexUsr}, Section 7.4
        \pdfinfoomitdate=1 % If nonzero, omitt he /CreationDate and /ModDate
        \pdfsuppressptexinfo=-1
        % eliminates PTEX info: 
        % 1 -> PTEX.Fullbanner
        % 2 -> PTEX.FileName
        % 4 -> PTEX.PageNumber
        % 8 -> PTEX.InfoDict (/Producer /Creator /CreationDate /ModDate /Trapped)

        % the following see pdftex user manual, \cite{PdfTexUsr}, Section 7.4
        \pdftrailerid{}
      \else
        % Here, the tex processor is unknown. 
        \GenericError{...}{Tried compilation with unknown TeX compiler. }{}{} % chktex 11
      \fi%pdftex
    \fi%luatex
  \else%ifpdf
  \fi%ifpdf
\fi%xetex


% The following is to control metadata: 
% - erase docdata and set the ones needed thereafter
% - erase trailer to make reproducible 
%   CAUTION: This is not recommended as the docs are no longer individual. 


%\pdfinfo{
%   /Author (Ernst Reissner)
%   /Title  (Maven plugin and ant-task to process latex)
%   /CreationDate (unknown)
%   /ModDate (unknown)
%   /Subject (latex plugin for maven and latex task for ant)
%   /Keywords (svg;png;metapost;PDF;LaTeX;maven;ant)
%}

% TBD: check of resulting pdf with exif unveils a warning duplicate author 

\hypersetup{
  pdfinfo={
      CreationDate={unknown},
      ModDate     ={unknown},
      Producer    ={unknown}
    }
}


