\RequirePackage[l2tabu, orthodox]{nag}
% blabla 
\PassOptionsToPackage{autostyle}{csquotes}
%\PassOptionsToPackage{dvipdfmx}{xcolor} %or dvipdfm 
%\PassOptionsToPackage{dvipdfmx}{graphicx} %or dvipdfm 
%\RequirePackage{lmodern} % does not work with htlatex
%\directlua{pdf.setminorversion(7)}
%\DocumentMetadata{pdfversion=1.7}%, lang=en-US}
\documentclass[a4paper,12pt,german,english]{book}
\newif\iflatextortf% false for latex but set true for latex2rtf internally 

%\includeonly{manualC3usage}

% for buildParams to check empty: \ifdefempty
\usepackage{etoolbox}
% for buildParams: \verbdef 
\usepackage{newverbs}

\usepackage[depythontex]{pythontex}% TBD: check whether appropriate 

% before \input{header.tex} because header.tex contains a patch for listings 
\usepackage{listings}
\usepackage{iftex}% This is a hack: is loaded later also in header.tex
% it is needed for htlatex because there is no htlualatex. 
% Even if there were, we had to change latex compiler separately for pdf and html. 
% The solution is to use make4ht and to pass the latex compiler as an argument.  
% 
\iftutex%
\usepackage{luamplib}% works with lualatex only maybe with magic comment 
\else
\fi
\input{header.tex}
\setMinorVersionPdf{7}% because of gnuplot file only 
% how to number the glossary in the toc? seemingly a gap in tocbibind 
%\usepackage[nottoc, numindex, numbib]{tocbibind}
\input{headerGrp.tex}
\input{headerManual.tex}
\input{buildParams.tex}
\input{headerSuppressMetaPDF.tex}

\hypersetup{
  pdfinfo={
    Author      ={Ernst Reissner},
    Title       ={Maven plugin and ant-task to process latex},
    Subject     ={latex plugin for maven and latex task for ant},
    Keywords    ={svg;png;metapost;PDF;LaTeX;maven;ant}
  }
}


\IfPackageLoadedTF{tex4ht}{%
  % no glossaries and no index with tex4ht 
  \newcommand{\gls}[1]{#1}
  \renewcommand{\index}[1]{}
  \newcommand{\newindex}[1][]{}
}{%
\setacronymstyle{long-short}
% file formats 
\newacronym{pdf}{pdf}{portable document format}
\newacronym{dvi}{dvi}{device independent; 
traditional output format of tex processors, today widely replaced by PDF}
\newacronym{xdv}{xdv}{extended device independent; 
an extension of the traditional output format \gls{dvi} of tex processors, 
today widely replaced by PDF}
\newacronym{eps}{eps}{encapsulated postscript}
\newacronym{tex}{tex}{\TeX{} the format, which may also be latex}
\newacronym{html}{html}{HyperText Markup Language}
\newacronym{xhtml}{xhtml}{extensible hypertext markup language}
\newacronym{odt}{odt}{open document text}
\newacronym{doc}{doc}{outdated document format for MS Word }
\newacronym{docx}{docx}{current document format for MS Word }
\newacronym{sgml}{sgml}{Standard generalized markup language }
\newacronym{xml}{xml}{extensible markup language }
\newacronym{ptx}{ptx}{pdf/postscript \TeX{} format; home-brewed }% home-brewed 

\newacronym{fig}{fig}{native file format for xfig }
\newacronym{gp}{gp}{Gnuplot file format}
\newacronym{png}{png}{Portable Network Graphics}
\newacronym{jpg}{jpg}{Graphics format developed by the Joint Photographic Experts Group }
\newacronym{gif}{gif}{Graphics Interchange Format, allows also animations }
\newacronym{bb}{bb}{Bounding box, created by ebb }
\newacronym{xbb}{xbb}{Bounding box, created by ebb with the option x. 
In addition to bb-files contains a high resolution bounding box }
\newacronym{svg}{svg}{Scalable Vector Graphics}
% latex file endings 
\newacronym{toc}{toc}{table of contents: input and output format of tex processors}
\newacronym{lof}{lof}{list of figures: input and output format of tex processors}
\newacronym{lot}{lot}{list of tables: input and input and output format of tex processors}
\newacronym{lol}{lol}{list of listings: input and output format of tex processors 
if used with package \texttt{listings}}
\newacronym{bcf}{bcf}{bibliography content file (?): generated by tex processors 
if used with package \texttt{biblatex}}
\newacronym{out}{out}{contains bookmarks: input and output format of tex processors 
if used with package \texttt{hyperref}, file ending seems naive}
\newacronym{ist}{ist}{(make-)index style file: output format of tex processors % chktex 36
if used with package \texttt{glossaries} configured for \texttt{makeindex} }
\newacronym{xdy}{xdy}{index style file for \texttt{xindy}: output format of tex processors 
if used with package \texttt{glossaries} configured for \texttt{xindy} }


\newacronym{log}{log}{logging file: for tex processors and \texttt{mpost}}
\newacronym{aux}{aux}{auxiliary file: input and output file for tex processors; read also e.g\@. by \texttt{bibtex}}
\newacronym{fls}{fls}{files dependencies: list of files the according tex file depends on; 
output format of tex processors if used with option \texttt{-recorder}}
\newacronym{synctex.gz}{synctex.gz}{fgzipped synchronization files 
relating tex files and their according pdf files: 
output format of tex processors if used with option \texttt{-synchtex=1}}

% files in conjunction with bibliographies
\newacronym{bib}{bib}{bibliography file: 
In particular input file for the \texttt{bibtex} tool}
\newacronym{bbl}{bbl}{bibliography for a latex document in latex format: 
written by the \texttt{bibtex} tool and read by \LaTeX{} processors}

% files in conjunction with indices 
\newacronym{idx}{idx}{index file containing unsorted and multiple index entries; 
output format of tex processors with package \texttt{makeindex} or similar}
\newacronym{ind}{ind}{%
index file containing sorted, unified and formatted index entries, 
output format of \texttt{makeindex} and \texttt{xindy}}

% files in conjunction with glossaries 
\newacronym{glo}{glo}{%
glossary file containing unsorted and multiple glossary entries; 
output format of tex processors with package \texttt{makeglossaries}}
\newacronym{glg}{glg}{%
\texttt{makeglossaries} log file }
\newacronym{gls}{gls}{%
glossary file containing sorted, unified and formatted glossary entries;
output format of the \texttt{makeglossaries} tool read by tex processors}
% TBD: one could add is and xdy files. 

% files in conjunction with pythontex
\newacronym{pytxcode}{pytxcode}{%
Code file consisting mainly of code snippets from the tex file; 
output format of tex processors with package \texttt{pythontex}}
\newacronym{depytx}{depytxc}{%
File containing information to replace code snippets in the tex file 
by the result of their evaluation;  
output format of tex processors with package \texttt{pythontex} 
if loaded with option \texttt{depythontex}
}
\newacronym{plg}{plg}{%
\texttt{pythontex} log file: home brewed since the original application does not write log files 
}
\newacronym{dplg}{dplg}{%
\texttt{depythontex} log file: home brewed since the original application does not write log files 
}

\newacronym{mp}{mp}{metapost: input format for the graphic program \texttt{mpost}}
\newacronym{ps}{ps}{PostScript: 
programming language for printers and printable file format; 
today mostly replaced by PDF}
\newacronym{mps}{mps}{metapost's postscript like output including text}
\newacronym{mpx}{mpx}{metapost tex output: texts }
\newindex[General Index]{idx}
\newindex[LaTeX Packages]{pkg}
}

% \newglossaryentry{latex}{name={latex},description={%
% A document preparation system 
% converting sources in the latex-format preferrably into pdf-output. 
% Historically, output was in \gls{dvi}-format 
% which is still used by htlatex as an intermediate format 
% to produce \gls{html} resp.~\gls{xhtml} and \gls{odt} output. 
% }}
% \newglossaryentry{htlatex}{name={htlatex},description={%
% A script which wraps latex 
% but producing (x)html and odt output instead of pdf 
% which is usual for latex. 
% }}
%\newglossaryentry{ps}{name={PostScript},description={%
%A computer language for creating vector graphics. 
%}}





% \newindex[General Index]{idx}
% \newindex[LaTeX Packages]{pkg}

% does not work 
%\setindexpreamble[pkg]{This index comprises all the latex packages used. }

\title{Manual for the \artifactId{} \protect\\
  and for an according ant-task \protect\\
Version \strippedVersionID}
\author{Ernst Reissner (rei3ner@arcor.de)}
\date{\today}%{\versionDate}


% seems to have a problem with pythontexW maybe clean before
%\includeonly{manualC4graphics}

\begin{document}
\maketitle

\tableofcontents
\listoffigures
\listoftables
\lstlistoflistings%


\include{manualC01intro}
\include{manualC02inst}
\include{manualC03usage}
\include{manualC04graphics}
\include{manualC05procMain}
\include{manualC06paramsSettings}
\include{manualC07ExcLogging}
\include{manualC08Gaps}
\include{manualC09Bugs}
\include{manualC10prefUsage}


\bibliographystyle{alpha}
\bibliography{lit,litLMPpub,litTools}

\IfPackageLoadedTF{tex4ht}{%
  % no index and no glossaries with tex4ht 
}{
%\chapter{Indices}
  \printindex[idx]
  \printindex[pkg]
  %\printglossaries%
}


%  "-src-specials -shell-escape -recorder" 
\end{document}

