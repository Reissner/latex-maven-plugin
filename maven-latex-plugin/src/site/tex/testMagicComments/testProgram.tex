% !TEX program=pdflatex
\documentclass{article}
% \usepackage{iftex}
% \usepackage{hyperref}
\input{../header.tex}
\input{../headerSuppressMetaPDF.tex}




% %\ifpdf%
%   \ifLuaTeX%
%     % for lualatex
%     \pdfvariable minorversion=7% chktex 1
%     % omit CreationDate and ModDate keys.
%     \pdfvariable suppressoptionalinfo 767% chktex 1
%     % no adding to the trailer dictionary.
%     \pdfvariable trailerid{}% chktex 1
%     \pdfvariable suppressoptionalinfo -1% chktex 1
%   \else
%     \ifXeTeX%
%       % for xelatex
%       \special{pdf:minorversion 7}% TBD: seems not to work 
%       % TBD: find a way to express pdfinfoomitdate: necessary? 
%       \special{pdf:trailerid []}

%       %\special{pdf:suppressoptionalinfo -1}
%     \else
%       \ifPDFTeX%
%         \pdfminorversion=7         % for pdflatex
%         % omit CreationDate and ModDate keys.
%         % not before pdfTeX 3.14159265-2.6-1.40.17
%         \pdfinfoomitdate=1                   % for pdflatex
%         % no adding to the trailer dictionary.
%         %\pdftrailer=0                        % for pdflatex
%         \pdftrailerid{}                       % for pdflatex
%         \pdfsuppressptexinfo=-1               % for pdflatex
%       \else
%         % Here, the tex processor is unknown. 
%       \fi%pdftex
%     \fi%xetex
%   \fi%luatex

  % 1 -> PTEX.Fullbanner
  % 2 -> PTEX.FileName
  % 4 -> PTEX.PageNumber
  % 8 -> PTEX.InfoDict (/Producer /Creator /CreationDate /ModDate /Trapped)
  % The following is to control metadata: 
  % - erase docdata and set the ones needed thereafter
  % - erase trailer to make repreoducible 
  %   CAUTION: This is not recommended as the docs are no longer individual. 


  %\pdfinfo{
  %   /Author (Ernst Reissner)
  %   /Title  (Maven plugin and ant-task to process latex)
  %   /CreationDate (unknown)
  %   /ModDate (unknown)
  %   /Subject (latex plugin for maven and latex task for ant)
  %   /Keywords (svg;png;metapost;PDF;LaTeX;maven;ant)
  %}

  % \hypersetup{
  %   pdfinfo={
  %     Author      ={Ernst Reissner},
  %     Title       ={Processing with xelatex: demand and test},
  %     CreationDate={unknown},
  %     ModDate     ={unknown},
  %     Producer    ={unknown},
  %     Subject     ={test file},
  %     Keywords    ={xelatex;magic commands}
  %   }
  % }

% \else%ifpdf
% % \special{pdf:minorversion 6}
% % % TBD: find a way to express pdfinfoomitdate: necessary? 
% % \special{pdf:trailerid []}
% \fi%ifpdf


\hypersetup{
  pdfinfo={
    Author      ={Ernst Reissner},
    Title       ={Processing with xelatex: demand and test},
    CreationDate={unknown},
    ModDate     ={unknown},
    Producer    ={unknown},
    Subject     ={test file},
    Keywords    ={xelatex;magic commands}
  }
}

\title{Processing with \texttt{xelatex}: demand and test}
\author{Ernst Reissner (rei3ner@arcor.de)}
\date{}


\begin{document}
\maketitle



Tests magic comment: overwrite default \LaTeX{} processor, which is \texttt{lualatex} by default, by \texttt{pdflatex}. 
If this does not work, an invisible \texttt{\textbackslash{}GenericError} 
in an \texttt{\textbackslash{}ifPDFTeX} construction throws an error leading to an error return code 
of the late processor. 
% \ifPDFTeX%
%   % ok
% \else
%   \ifLuaTeX%
%     \GenericError{...}{Found this document to be converted with lualatex, although pdflatex is specified. }{}{} % chktex 11
%   \else
%     \ifXeTeX%
%       \GenericError{...}{Found this document to be converted with xelatex, although xelatex is specified. }{}{} % chktex 11
%     \else
%       \GenericError{...}{Found this document to be converted not with pdflatex, although this is specified. }{}{} % chktex 11
%     \fi
%   \fi
% \fi
\end{document}